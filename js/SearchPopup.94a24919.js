(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SearchPopup"],{"0cb2":function(t,e,r){var n=r("7b0b"),i=Math.floor,a="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,s,l,u){var d=r+t.length,h=s.length,f=c;return void 0!==l&&(l=n(l),f=o),a.call(u,f,(function(n,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(d);case"<":o=l[a.slice(1,-1)];break;default:var c=+a;if(0===c)return n;if(c>h){var u=i(c/10);return 0===u?n:u<=h?void 0===s[u-1]?a.charAt(1):s[u-1]+a.charAt(1):n}o=s[c-1]}return void 0===o?"":o}))}},1195:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+BAMAAAAQDbi7AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAASUExURfjz8NTIvOPa0drQxe3l3/Pt6dJ8uJYAAAGKSURBVFjD7ZjNboMwEIT5vccxuZPS3qHJA4SouQPp+z9LkSJVBduw42mEqnrun9de744XoigoKCgoKCjoN5V/VI1Sp5eLH34d4YdePejPb3rUGQ+uJkIXiNVMJcanc35P8uAGEsVtwOQVVAWZyddkfOgAR5NXHZN+7AZs4YEE5DZcHZjsjyq44wMXYOe1f/c9FPg/wqdP4TXjHlD9sjzbfxnZ/3b/2Mn9q+H8y+5/cv8crPyppI4vv8DEwWuu/MV8vHH89En5K6jyBxrAwddU+QIF3Nv5jvMfTfa/3D+ilpx/soac3zJy/oyI7NkdsMD4lhp/LR4AfoQl3PeHkYAa5Xsm+0YNlzAf3ZnTz0poF/j/xl9/NoB+v2H0YPgHskJWWZ/fm8/WJ3uQvEB5pZzSb17WD/yIGdSK9h2FLy8gwJcWEOFuN0qUUGefzK/a6VGMK90t++2qCvHQ59BFNLK4deDCGxnoQX5+BQ3KF9T25y9yDPPTabbF+dKz9qwTSUPyOD59U7bmm634LwhiuCxbAoGfAAAAAElFTkSuQmCC"},"14c3":function(t,e,r){var n=r("c6b6"),i=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var a=r.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"3d5e":function(t,e,r){},"4eaa":function(t,e,r){"use strict";r("fb85")},5319:function(t,e,r){"use strict";var n=r("d784"),i=r("825a"),a=r("50c4"),o=r("a691"),c=r("1d80"),s=r("8aa5"),l=r("0cb2"),u=r("14c3"),d=Math.max,h=Math.min,f=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,r,n){var p=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=n.REPLACE_KEEPS_$0,v=p?"$":"$0";return[function(r,n){var i=c(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,i,n):e.call(String(i),r,n)},function(t,n){if(!p&&g||"string"===typeof n&&-1===n.indexOf(v)){var c=r(e,t,this,n);if(c.done)return c.value}var y=i(t),x=String(this),b="function"===typeof n;b||(n=String(n));var m=y.global;if(m){var w=y.unicode;y.lastIndex=0}var S=[];while(1){var A=u(y,x);if(null===A)break;if(S.push(A),!m)break;var C=String(A[0]);""===C&&(y.lastIndex=s(x,a(y.lastIndex),w))}for(var E="",k=0,_=0;_<S.length;_++){A=S[_];for(var L=String(A[0]),I=d(h(o(A.index),x.length),0),T=[],P=1;P<A.length;P++)T.push(f(A[P]));var V=A.groups;if(b){var O=[L].concat(T,I,x);void 0!==V&&O.push(V);var K=String(n.apply(void 0,O))}else K=l(L,x,I,T,V,n);I>=k&&(E+=x.slice(k,I)+K,k=I+L.length)}return E+x.slice(k)}]}))},"5f0e":function(t,e,r){"use strict";r("c3a5")},7079:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ul",t._l(t.goodsList,(function(e){return r("li",{key:e.id,on:{click:function(r){return t.goTODetail(e.id)}}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.list_pic_url||t.imgSrc,expression:"item.list_pic_url || imgSrc"}],staticStyle:{display:"block"},attrs:{width:"100%",alt:""}}),r("div",{staticClass:"van-ellipsis"},[t._v(t._s(e.name))]),r("div",{staticClass:"price"},[t._v(t._s(t._f("RMBformat")(e.retail_price)))])])})),0)])},i=[],a={props:["goodsList"],data:function(){return{imgSrc:r("1195")}},methods:{goTODetail:function(t){this.$router.push("/detail?id="+t)}}},o=a,c=(r("4eaa"),r("2877")),s=Object(c["a"])(o,n,i,!1,null,"37a668a4",null);e["a"]=s.exports},"84cc":function(t,e,r){"use strict";r("3d5e")},"8aa5":function(t,e,r){"use strict";var n=r("6547").charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},9263:function(t,e,r){"use strict";var n=r("ad6d"),i=r("9f7f"),a=r("5692"),o=RegExp.prototype.exec,c=a("native-string-replace",String.prototype.replace),s=o,l=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],h=l||d||u;h&&(s=function(t){var e,r,i,a,s=this,h=u&&s.sticky,f=n.call(s),p=s.source,g=0,v=t;return h&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),v=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,g++),r=new RegExp("^(?:"+p+")",f)),d&&(r=new RegExp("^"+p+"$(?!\\s)",f)),l&&(e=s.lastIndex),i=o.call(h?r:s,v),h?i?(i.input=i.input.slice(g),i[0]=i[0].slice(g),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:l&&i&&(s.lastIndex=s.global?i.index+i[0].length:e),d&&i&&i.length>1&&c.call(i[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i}),t.exports=s},"9f7f":function(t,e,r){"use strict";var n=r("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ab0e:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"search-popup"},[r("van-search",{attrs:{"show-action":"",placeholder:t.placeholderVal},on:{search:t.onSearchEnter,input:t.onInput},scopedSlots:t._u([{key:"action",fn:function(){return[r("div",{on:{click:t.onCancel}},[t._v("取消")])]},proxy:!0}]),model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}}),1==t.blockShow?r("HistoryHot",{attrs:{historyKeywordList:t.historyKeywordList,hotKeywordList:t.hotKeywordList},on:{tagClick:t.tagClick}}):2==t.blockShow?r("SearchTipsList",{attrs:{searchTips:t.searchTips},on:{cellClick:t.tagClick}}):3==t.blockShow?r("SearchProductList",{attrs:{goodsList:t.goodsList,filterCategory:t.filterCategory},on:{categoryChange:t.categoryChange,priceChange:t.priceChange}}):t._e()],1)},i=[],a=r("5530"),o=(r("ac1f"),r("5319"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("van-dropdown-menu",[r("van-dropdown-item",{attrs:{title:"综合",disabled:""}}),r("van-dropdown-item",{attrs:{title:"价格",options:t.option1},on:{change:function(e){return t.priceChange(t.priceVal)}},model:{value:t.priceVal,callback:function(e){t.priceVal=e},expression:"priceVal"}}),r("van-dropdown-item",{attrs:{title:"分类",options:t.filterCategory},on:{change:t.categoryChange},model:{value:t.categoryVal,callback:function(e){t.categoryVal=e},expression:"categoryVal"}})],1),0==t.goodsList.length?r("van-empty",{attrs:{image:"search",description:"抱歉，搜索不到产品"}}):r("Products",{attrs:{goodsList:t.goodsList}})],1)}),c=[],s=(r("d81d"),r("7079")),l={props:["goodsList","filterCategory"],data:function(){return{priceVal:"",categoryVal:0,option1:[{text:"价格由高到低",value:"desc"},{text:"价格由低到高",value:"asc"}]}},components:{Products:s["a"]},methods:{categoryChange:function(t){this.$emit("categoryChange",t)},priceChange:function(t){this.$emit("priceChange",t)}},beforeUpdate:function(){var t=this;this.filterCategory.map((function(e){e.checked&&(t.categoryVal=e.value)}))}},u=l,d=r("2877"),h=Object(d["a"])(u,o,c,!1,null,"02fe579e",null),f=h.exports,p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.searchTips,(function(e){return r("van-cell",{key:e,attrs:{title:e},on:{click:function(r){return t.cellClick(e)}}})})),1)],1)},g=[],v={props:["searchTips"],data:function(){return{loading:!1,finished:!0}},methods:{cellClick:function(t){this.$emit("cellClick",t)}}},y=v,x=Object(d["a"])(y,p,g,!1,null,"2729cf90",null),b=x.exports,m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"history-hot"},[r("div",{staticClass:"his-hot"},[r("div",{staticClass:"hd"},[r("h4",[t._v("历史记录")]),r("van-icon",{attrs:{name:"delete-o"},on:{click:t.clearHis}})],1),r("div",{staticClass:"bd"},t._l(t.historyKeywordList,(function(e,n){return r("van-tag",{key:n,attrs:{plain:"",type:"primary","text-color":"#666"},on:{click:function(r){return t.tagClick(e)}}},[t._v(t._s(e))])})),1)]),r("div",{staticClass:"his-hot"},[t._m(0),r("div",{staticClass:"bd"},t._l(t.hotKeywordList,(function(e,n){return r("van-tag",{key:n,attrs:{plain:"",type:e.is_hot?"danger":"primary","text-color":"#666"},on:{click:function(r){return t.tagClick(e.keyword)}}},[t._v(t._s(e.keyword))])})),1)])])},w=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hd"},[r("h4",[t._v("热门搜索")])])}],S=r("f96b"),A={props:["historyKeywordList","hotKeywordList"],data:function(){return{}},methods:{clearHis:function(){var t=this;Object(S["c"])().then((function(e){t.$toast.success("清除成功"),t.$router.go(0)}))},tagClick:function(t){this.$emit("tagClick",t)}}},C=A,E=(r("5f0e"),Object(d["a"])(C,m,w,!1,null,"71f29978",null)),k=E.exports,_=r("2f62"),L={data:function(){return{searchVal:"",placeholderVal:"",blockShow:1,historyKeywordList:[],hotKeywordList:[],searchTips:[],goodsList:[],filterCategory:[],order:"desc",categoryId:0,sort:"id",timer:null}},created:function(){var t=this;Object(S["i"])().then((function(e){var r=e.data,n=r.defaultKeyword,i=r.historyKeywordList,a=r.hotKeywordList;t.placeholderVal=n.keyword,t.historyKeywordList=i,t.hotKeywordList=a}))},methods:Object(a["a"])(Object(a["a"])({},Object(_["b"])({updateIsShowShadow:"showshadow/updateIsShowShadow"})),{},{onSearchEnter:function(){this.order="desc",this.categoryId=0,this.sort="id",this.onSearch(this.searchVal)},onSearch:function(t){var e=this;Object(S["m"])({keyword:t,page:1,size:20,order:this.order,categoryId:this.categoryId,sort:this.sort}).then((function(t){e.goodsList=t.data.goodsList;var r=t.data.filterCategory;r=JSON.parse(JSON.stringify(r).replace(/name/g,"text").replace(/id/g,"value")),e.filterCategory=r,e.blockShow=3}))},onCancel:function(){1===this.blockShow?this.$router.go(-1):this.blockShow=1},onInput:function(t){var e=this;this.blockShow=2,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){Object(S["n"])({keyword:t}).then((function(t){0==t.errno&&(e.searchTips=t.data)}))}),500),""==t&&(this.blockShow=1)},categoryChange:function(t){this.categoryId=t,this.onSearch(this.searchVal)},priceChange:function(t){this.order=t,this.sort="price",this.onSearch(this.searchVal)},tagClick:function(t){this.searchVal=t,this.onSearch(this.searchVal)}}),components:{SearchProductList:f,SearchTipsList:b,HistoryHot:k}},I=L,T=(r("84cc"),Object(d["a"])(I,n,i,!1,null,"4533d028",null));e["default"]=T.exports},ac1f:function(t,e,r){"use strict";var n=r("23e7"),i=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,r){"use strict";var n=r("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c3a5:function(t,e,r){},d784:function(t,e,r){"use strict";r("ac1f");var n=r("6eeb"),i=r("9263"),a=r("d039"),o=r("b622"),c=r("9112"),s=o("species"),l=RegExp.prototype,u=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),h=o("replace"),f=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),p=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,h){var g=o(t),v=!a((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),y=v&&!a((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[s]=function(){return r},r.flags="",r[g]=/./[g]),r.exec=function(){return e=!0,null},r[g](""),!e}));if(!v||!y||"replace"===t&&(!u||!d||f)||"split"===t&&!p){var x=/./[g],b=r(g,""[t],(function(t,e,r,n,a){var o=e.exec;return o===i||o===l.exec?v&&!a?{done:!0,value:x.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),m=b[0],w=b[1];n(String.prototype,t,m),n(l,g,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}h&&c(l[g],"sham",!0)}},d81d:function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").map,a=r("1dde"),o=a("map");n({target:"Array",proto:!0,forced:!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},fb85:function(t,e,r){}}]);
//# sourceMappingURL=SearchPopup.94a24919.js.map