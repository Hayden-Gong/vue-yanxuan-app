{"version":3,"sources":["webpack:///./src/views/Mine.vue?7c30","webpack:///src/views/Mine.vue","webpack:///./src/views/Mine.vue?6028","webpack:///./src/views/Mine.vue","webpack:///./src/assets/avatar.png","webpack:///./src/views/Mine.vue?b6bc"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","avatarSrc","on","showLoginModal","_v","_s","nickname","logIcon","showLogoutModal","_l","value","index","key","icon","title","model","callback","$$v","isShowLoginModal","expression","onSubmit","required","message","username","password","staticStyle","onLogout","isShowLogoutModal","staticRenderFns","component","module","exports"],"mappings":"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","file":"js/mine.f127359f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"user_top\"},[_c('img',{attrs:{\"src\":_vm.avatarSrc,\"alt\":\"\"},on:{\"click\":_vm.showLoginModal}}),_c('h3',{on:{\"click\":_vm.showLoginModal}},[_vm._v(_vm._s(_vm.nickname))]),_c('van-icon',{attrs:{\"name\":_vm.logIcon},on:{\"click\":_vm.showLogoutModal}})],1),_c('van-grid',{attrs:{\"column-num\":3,\"square\":\"\"}},_vm._l((_vm.myModules),function(value,index){return _c('van-grid-item',{key:index,attrs:{\"icon\":value.icon,\"text\":value.title}})}),1),_c('van-popup',{model:{value:(_vm.isShowLoginModal),callback:function ($$v) {_vm.isShowLoginModal=$$v},expression:\"isShowLoginModal\"}},[_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"username\",\"label\":\"用户名\",\"placeholder\":\"用户名\",\"rules\":[{ required: true, message: '请填写用户名' }]},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"pwd\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[{ required: true, message: '请填写密码' }]},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"登录\")])],1)],1)],1),_c('van-dialog',{attrs:{\"title\":\"登出确认框\",\"show-cancel-button\":\"\"},on:{\"confirm\":_vm.onLogout},model:{value:(_vm.isShowLogoutModal),callback:function ($$v) {_vm.isShowLogoutModal=$$v},expression:\"isShowLogoutModal\"}},[_c('div',{staticStyle:{\"text-align\":\"center\",\"padding\":\"20px 0\"}},[_vm._v(\"确定退出登录吗?\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"user_top\">\r\n            <img :src=\"avatarSrc\" alt=\"\" @click=\"showLoginModal\">\r\n            <h3 @click=\"showLoginModal\">{{nickname}}</h3>\r\n            <van-icon :name=\"logIcon\" @click=\"showLogoutModal\" />\r\n        </div>\r\n        \r\n        <van-grid :column-num=\"3\" square>\r\n            <van-grid-item \r\n            v-for=\"value,index in myModules\" \r\n            :key=\"index\" \r\n            :icon=\"value.icon\" \r\n            :text=\"value.title\"\r\n            />\r\n        </van-grid>\r\n\r\n        <!-- 登录弹出层 -->\r\n        <van-popup v-model=\"isShowLoginModal\">\r\n            <van-form @submit=\"onSubmit\">\r\n            <van-field\r\n                v-model=\"username\"\r\n                name=\"username\"\r\n                label=\"用户名\"\r\n                placeholder=\"用户名\"\r\n                :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n            />\r\n            <van-field\r\n                v-model=\"password\"\r\n                type=\"password\"\r\n                name=\"pwd\"\r\n                label=\"密码\"\r\n                placeholder=\"密码\"\r\n                :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n            />\r\n            <div style=\"margin: 16px;\">\r\n                <van-button round block type=\"info\" native-type=\"submit\">登录</van-button>\r\n            </div>\r\n            </van-form>\r\n        </van-popup>\r\n\r\n        <!-- 退出确认框 -->\r\n        <van-dialog v-model=\"isShowLogoutModal\" title=\"登出确认框\" show-cancel-button @confirm=\"onLogout\">\r\n            <div style=\"text-align:center;padding:20px 0;\">确定退出登录吗?</div>\r\n        </van-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { LoginByWeb } from '@/http/api'\r\nimport avatarSrc from '@/assets/avatar.png'\r\nimport { mapMutations, mapState } from 'vuex'\r\nexport default {\r\n    data () {\r\n        return {\r\n            myModules: [\r\n                { title:'我的订单', icon: 'label-o' },\r\n                { title:'优惠券', icon: 'bill-o' },\r\n                { title:'礼品卡', icon: 'goods-collect-o' },\r\n                { title:'我的收藏', icon: 'location-o' },\r\n                { title:'我的足迹', icon: 'flag-o' },\r\n                { title:'会员福利', icon: 'contact' },\r\n                { title:'地址管理', icon: 'aim' },\r\n                { title:'账号安全', icon: 'warn-o' },\r\n                { title:'联系客服', icon: 'service-o' },\r\n                { title:'帮助中心', icon: 'question-o' },\r\n                { title:'意见反馈', icon: 'smile-comment-o' }\r\n            ],\r\n            isShowLoginModal: false,\r\n            isShowLogoutModal: false,\r\n            username: '',\r\n            password: '',\r\n            avatarSrc: avatarSrc,\r\n            nickname: '点击登录',\r\n            logIcon: 'arrow'\r\n        }\r\n    },\r\n    computed:{\r\n        ...mapState({\r\n            isForceLogin: state=>state.isForceLogin.isForceLogin\r\n        })\r\n    },\r\n    methods: {\r\n        ...mapMutations({\r\n            updateIsForceLogin: 'isForceLogin/updateIsForceLogin'\r\n        }),\r\n        showLoginModal(){\r\n            if(localStorage.getItem(\"token\"))\r\n                return\r\n            // 展示登录框\r\n            this.isShowLoginModal = true\r\n        },\r\n        showLogoutModal(){\r\n            if(!localStorage.getItem(\"token\")){\r\n                this.isShowLoginModal = true\r\n                return\r\n            }\r\n            // 展示登出框\r\n            this.isShowLogoutModal = true\r\n        },\r\n        onSubmit(values) {\r\n            console.log('submit', values);\r\n            LoginByWeb(values).then(res=>{\r\n                let userInfo = res.data.userInfo\r\n                // 登录成功后的业务逻辑\r\n                // 1 提示用户登录成功\r\n                this.$toast.success(\"登录成功！\")\r\n                // 2 保存token值和用户常用信息到本地\r\n                localStorage.setItem(\"token\", res.data.token)\r\n                localStorage.setItem(\"userInfo\", JSON.stringify(userInfo))\r\n                setTimeout(() => {\r\n                    // 3 关闭登录窗口\r\n                    this.isShowLoginModal = false;\r\n                    // 4 把用户信息渲染到页面上\r\n                    this.avatarSrc = userInfo.avatar\r\n                    this.nickname = userInfo.nickname\r\n                    this.logIcon = \"cross\"\r\n\r\n                    // 强制登录-登录成功后回到上一个页面\r\n                    if(this.isForceLogin){\r\n                        this.$router.go(-1)\r\n                        this.updateIsForceLogin(false)\r\n                    }\r\n                }, 500);\r\n            })\r\n        },\r\n        onLogout(){\r\n            this.$toast.success(\"退出成功！\")\r\n            setTimeout(() => {\r\n                localStorage.removeItem(\"token\")\r\n                localStorage.removeItem(\"userInfo\")\r\n                this.avatarSrc = avatarSrc\r\n                this.nickname = \"点击登录\"\r\n                this.logIcon = \"arrow\"\r\n            }, 500);\r\n        }\r\n    },\r\n    created(){\r\n        // 页面刷新时判断用户是否登录\r\n        let token = localStorage.getItem(\"token\")\r\n        if(token){\r\n            let userInfo = JSON.parse(localStorage.getItem(\"userInfo\"))\r\n            this.avatarSrc = userInfo.avatar\r\n            this.nickname = userInfo.nickname\r\n            this.logIcon = \"cross\"\r\n        }\r\n    }\r\n}\r\n</script>\r\n \r\n<style lang = \"less\" scoped>\r\n    .user_top {\r\n        padding: .2rem .1rem;\r\n        background-color: #333;\r\n        color: #fff;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        img {\r\n            width: .7rem;\r\n            border-radius: .35rem;\r\n        }\r\n        h3 {\r\n            flex: 1;\r\n            padding-left: .1rem;\r\n        }\r\n    }\r\n    .van-popup {\r\n        width: 85%;\r\n        padding: .1rem 0;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mine.vue?vue&type=template&id=10926a26&scoped=true&\"\nimport script from \"./Mine.vue?vue&type=script&lang=js&\"\nexport * from \"./Mine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mine.vue?vue&type=style&index=0&id=10926a26&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10926a26\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+BAMAAAAQDbi7AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAASUExURfjz8NTIvOPa0drQxe3l3/Pt6dJ8uJYAAAGKSURBVFjD7ZjNboMwEIT5vccxuZPS3qHJA4SouQPp+z9LkSJVBduw42mEqnrun9de744XoigoKCgoKCjoN5V/VI1Sp5eLH34d4YdePejPb3rUGQ+uJkIXiNVMJcanc35P8uAGEsVtwOQVVAWZyddkfOgAR5NXHZN+7AZs4YEE5DZcHZjsjyq44wMXYOe1f/c9FPg/wqdP4TXjHlD9sjzbfxnZ/3b/2Mn9q+H8y+5/cv8crPyppI4vv8DEwWuu/MV8vHH89En5K6jyBxrAwddU+QIF3Nv5jvMfTfa/3D+ilpx/soac3zJy/oyI7NkdsMD4lhp/LR4AfoQl3PeHkYAa5Xsm+0YNlzAf3ZnTz0poF/j/xl9/NoB+v2H0YPgHskJWWZ/fm8/WJ3uQvEB5pZzSb17WD/yIGdSK9h2FLy8gwJcWEOFuN0qUUGefzK/a6VGMK90t++2qCvHQ59BFNLK4deDCGxnoQX5+BQ3KF9T25y9yDPPTabbF+dKz9qwTSUPyOD59U7bmm634LwhiuCxbAoGfAAAAAElFTkSuQmCC\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mine.vue?vue&type=style&index=0&id=10926a26&lang=less&scoped=true&\""],"sourceRoot":""}