(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mine"],{"0a4e":function(o,t,e){"use strict";e.r(t);var n=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("div",{staticClass:"user_top"},[e("img",{attrs:{src:o.avatarSrc,alt:""},on:{click:o.showLoginModal}}),e("h3",{on:{click:o.showLoginModal}},[o._v(o._s(o.nickname))]),e("van-icon",{attrs:{name:o.logIcon},on:{click:o.showLogoutModal}})],1),e("van-grid",{attrs:{"column-num":3,square:""}},o._l(o.myModules,(function(o,t){return e("van-grid-item",{key:t,attrs:{icon:o.icon,text:o.title}})})),1),e("van-popup",{model:{value:o.isShowLoginModal,callback:function(t){o.isShowLoginModal=t},expression:"isShowLoginModal"}},[e("van-form",{on:{submit:o.onSubmit}},[e("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:o.username,callback:function(t){o.username=t},expression:"username"}}),e("van-field",{attrs:{type:"password",name:"pwd",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:o.password,callback:function(t){o.password=t},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[o._v("登录")])],1)],1)],1),e("van-dialog",{attrs:{title:"登出确认框","show-cancel-button":""},on:{confirm:o.onLogout},model:{value:o.isShowLogoutModal,callback:function(t){o.isShowLogoutModal=t},expression:"isShowLogoutModal"}},[e("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[o._v("确定退出登录吗?")])])],1)},a=[],i=e("5530"),s=e("f96b"),c=e("1195"),l=e.n(c),r=e("2f62"),u={data:function(){return{myModules:[{title:"我的订单",icon:"label-o"},{title:"优惠券",icon:"bill-o"},{title:"礼品卡",icon:"goods-collect-o"},{title:"我的收藏",icon:"location-o"},{title:"我的足迹",icon:"flag-o"},{title:"会员福利",icon:"contact"},{title:"地址管理",icon:"aim"},{title:"账号安全",icon:"warn-o"},{title:"联系客服",icon:"service-o"},{title:"帮助中心",icon:"question-o"},{title:"意见反馈",icon:"smile-comment-o"}],isShowLoginModal:!1,isShowLogoutModal:!1,username:"",password:"",avatarSrc:l.a,nickname:"点击登录",logIcon:"arrow"}},computed:Object(i["a"])({},Object(r["c"])({isForceLogin:function(o){return o.isForceLogin.isForceLogin}})),methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])({updateIsForceLogin:"isForceLogin/updateIsForceLogin"})),{},{showLoginModal:function(){localStorage.getItem("token")||(this.isShowLoginModal=!0)},showLogoutModal:function(){localStorage.getItem("token")?this.isShowLogoutModal=!0:this.isShowLoginModal=!0},onSubmit:function(o){var t=this;console.log("submit",o),Object(s["p"])(o).then((function(o){var e=o.data.userInfo;t.$toast.success("登录成功！"),localStorage.setItem("token",o.data.token),localStorage.setItem("userInfo",JSON.stringify(e)),setTimeout((function(){t.isShowLoginModal=!1,t.avatarSrc=e.avatar,t.nickname=e.nickname,t.logIcon="cross",t.isForceLogin&&(t.$router.go(-1),t.updateIsForceLogin(!1))}),500)}))},onLogout:function(){var o=this;this.$toast.success("退出成功！"),setTimeout((function(){localStorage.removeItem("token"),localStorage.removeItem("userInfo"),o.avatarSrc=l.a,o.nickname="点击登录",o.logIcon="arrow"}),500)}}),created:function(){var o=localStorage.getItem("token");if(o){var t=JSON.parse(localStorage.getItem("userInfo"));this.avatarSrc=t.avatar,this.nickname=t.nickname,this.logIcon="cross"}}},d=u,g=(e("93eb"),e("2877")),m=Object(g["a"])(d,n,a,!1,null,"10926a26",null);t["default"]=m.exports},1195:function(o,t){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+BAMAAAAQDbi7AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAASUExURfjz8NTIvOPa0drQxe3l3/Pt6dJ8uJYAAAGKSURBVFjD7ZjNboMwEIT5vccxuZPS3qHJA4SouQPp+z9LkSJVBduw42mEqnrun9de744XoigoKCgoKCjoN5V/VI1Sp5eLH34d4YdePejPb3rUGQ+uJkIXiNVMJcanc35P8uAGEsVtwOQVVAWZyddkfOgAR5NXHZN+7AZs4YEE5DZcHZjsjyq44wMXYOe1f/c9FPg/wqdP4TXjHlD9sjzbfxnZ/3b/2Mn9q+H8y+5/cv8crPyppI4vv8DEwWuu/MV8vHH89En5K6jyBxrAwddU+QIF3Nv5jvMfTfa/3D+ilpx/soac3zJy/oyI7NkdsMD4lhp/LR4AfoQl3PeHkYAa5Xsm+0YNlzAf3ZnTz0poF/j/xl9/NoB+v2H0YPgHskJWWZ/fm8/WJ3uQvEB5pZzSb17WD/yIGdSK9h2FLy8gwJcWEOFuN0qUUGefzK/a6VGMK90t++2qCvHQ59BFNLK4deDCGxnoQX5+BQ3KF9T25y9yDPPTabbF+dKz9qwTSUPyOD59U7bmm634LwhiuCxbAoGfAAAAAElFTkSuQmCC"},"93eb":function(o,t,e){"use strict";e("f6ee")},f6ee:function(o,t,e){}}]);
//# sourceMappingURL=mine.f127359f.js.map